class PerformanceMonitor{constructor(){this.metrics={navigationStart:0,domLoaded:0,windowLoaded:0,firstContentfulPaint:0,largestContentfulPaint:0},this.init()}init(){if(window.performance&&window.performance.timing&&(this.metrics.navigationStart=window.performance.timing.navigationStart),document.addEventListener("DOMContentLoaded",()=>{this.metrics.domLoaded=Date.now(),this.initOptimizations()}),window.addEventListener("load",()=>{this.metrics.windowLoaded=Date.now(),this.logMetrics()}),window.performance&&window.performance.getEntriesByType){new PerformanceObserver(e=>{for(const t of e.getEntries())"first-contentful-paint"===t.name&&(this.metrics.firstContentfulPaint=t.startTime,console.log(`First Contentful Paint: ${Math.round(t.startTime)}ms`))}).observe({type:"paint",buffered:!0});new PerformanceObserver(e=>{const t=e.getEntries(),i=t[t.length-1];this.metrics.largestContentfulPaint=i.startTime,console.log(`Largest Contentful Paint: ${Math.round(i.startTime)}ms`)}).observe({type:"largest-contentful-paint",buffered:!0})}}logMetrics(){const e=this.metrics.domLoaded-this.metrics.navigationStart,t=this.metrics.windowLoaded-this.metrics.navigationStart;console.log(`DOM Content Loaded: ${e}ms`),console.log(`Window Loaded: ${t}ms`),window.gtag&&gtag("event","performance_metrics",{dom_loaded:e,window_loaded:t,first_contentful_paint:this.metrics.firstContentfulPaint,largest_contentful_paint:this.metrics.largestContentfulPaint})}initOptimizations(){this.setupLazyLoading(),this.addResourceHints(),this.setupAdaptiveRendering()}setupLazyLoading(){const e=document.querySelectorAll('img[loading="lazy"]');if("IntersectionObserver"in window){const t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const i=e.target;i.dataset.src&&(i.src=i.dataset.src,i.removeAttribute("data-src")),i.classList.add("loaded"),t.unobserve(i)}})},{rootMargin:"100px",threshold:.1});e.forEach(e=>{const i=e.parentElement;(i.classList.contains("project-image")||i.classList.contains("profile-card"))&&(i.classList.add("image-placeholder"),e.addEventListener("load",()=>{i.classList.remove("image-placeholder")})),t.observe(e)})}else e.forEach(e=>{e.dataset.src&&(e.src=e.dataset.src,e.removeAttribute("data-src"))})}addResourceHints(){["fonts.googleapis.com","fonts.gstatic.com","cdnjs.cloudflare.com"].forEach(e=>{const t=document.createElement("link");t.rel="dns-prefetch",t.href=`//${e}`,document.head.appendChild(t)});[{href:"images/logo.jpg",as:"image"},{href:"css/base/variables.css",as:"style"},{href:"css/components/vanta-background.css",as:"style"}].forEach(e=>{const t=document.createElement("link");t.rel="preload",t.href=e.href,t.as=e.as,document.head.appendChild(t)})}setupAdaptiveRendering(){this.checkDeviceCapabilities(),this.checkNetworkConditions(),this.checkBatteryStatus()}isLowEndDevice(){return navigator.hardwareConcurrency&&navigator.hardwareConcurrency<=2||navigator.deviceMemory&&navigator.deviceMemory<=4||window.matchMedia("(prefers-reduced-motion: reduce)").matches}checkDeviceCapabilities(){this.isLowEndDevice()&&this.optimizeForLowEndDevice()}optimizeForLowEndDevice(){this.useSimplifiedBackground(),document.body.classList.add("reduce-animations"),this.simplifyHeaderAnimations()}simplifyHeaderAnimations(){document.querySelectorAll(".header-name-animate").forEach(e=>{e.style.animationDuration="8s",e.classList.contains("header-name-animate")&&(e.classList.remove("header-name-animate"),e.classList.add("header-name-simple"))})}useSimplifiedBackground(){"undefined"!=typeof VANTA&&(window.vantaEffect&&window.vantaEffect.destroy(),VANTA.DOTS&&(window.vantaEffect=VANTA.DOTS({el:"#vanta-bg",mouseControls:!1,touchControls:!1,gyroControls:!1,minHeight:200,minWidth:200,scale:1,scaleMobile:.75,color:60159,backgroundColor:659231,size:3.8,spacing:33,showLines:!1})))}checkNetworkConditions(){if("connection"in navigator){const e=navigator.connection;"slow-2g"!==e.effectiveType&&"2g"!==e.effectiveType||this.optimizeForSlowConnection(),e.addEventListener("change",()=>{"slow-2g"!==e.effectiveType&&"2g"!==e.effectiveType||this.optimizeForSlowConnection()})}}optimizeForSlowConnection(){this.useSimplifiedBackground(),document.querySelectorAll("img").forEach(e=>{console.log("Network optimization: Would load low-quality version of",e.src)})}checkBatteryStatus(){"getBattery"in navigator&&navigator.getBattery().then(e=>{e.level<.2&&!e.charging&&this.optimizeForBattery(),e.addEventListener("levelchange",()=>{e.level<.2&&!e.charging&&this.optimizeForBattery()})})}optimizeForBattery(){this.useSimplifiedBackground(),document.body.classList.add("reduce-animations")}}const performanceOptimizer=new PerformanceMonitor;